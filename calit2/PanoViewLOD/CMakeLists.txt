SET(LIB_NAME PanoViewLOD)
SET(PLUGIN_HEADERS
    cube.hpp
    queue.hpp
    sph-cache.hpp
    sph-model.hpp
    tree.hpp
    glsl.h
    glyph.h
    math3d.h
    PanoDrawableLOD.h
    PanoViewLOD.h
    PanoViewObject.h
    DiskCache.h
)

ADD_LIBRARY(${LIB_NAME}
    "SHARED"
    ${PLUGIN_HEADERS}
    cube.cpp
    sph-cache.cpp
    sph-model.cpp
    glsl.c
    glyph.c
    math3d.c
    PanoDrawableLOD.cpp
    PanoViewLOD.cpp
    PanoViewObject.cpp
    DiskCache.cpp
)

FIND_PACKAGE(GLEW)
FIND_PACKAGE(SDL)
FIND_PACKAGE(TIFF)
FIND_PACKAGE(MXML)

INCLUDE_DIRECTORIES(${OSG_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${GLEW_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${SDL_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${TIFF_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${MXML_INCLUDE_DIR})
TARGET_LINK_LIBRARIES(${LIB_NAME} ${OSG_LIBRARIES})
TARGET_LINK_LIBRARIES(${LIB_NAME} ${GLEW_LIBRARY})
TARGET_LINK_LIBRARIES(${LIB_NAME} ${SDL_LIBRARY})
TARGET_LINK_LIBRARIES(${LIB_NAME} ${TIFF_LIBRARIES})
TARGET_LINK_LIBRARIES(${LIB_NAME} ${MXML_LIBRARY})

ADD_CALVR_LIBRARIES(${LIB_NAME})

INSTALL(TARGETS ${LIB_NAME} DESTINATION lib/plugins)

OPTION(PLUGIN_PANOVIEWLOD_PANOPROC "Build panoproc application" OFF)

IF(PLUGIN_PANOVIEWLOD_PANOPROC)
    ADD_SUBDIRECTORY(panoproc)
ENDIF(PLUGIN_PANOVIEWLOD_PANOPROC)
